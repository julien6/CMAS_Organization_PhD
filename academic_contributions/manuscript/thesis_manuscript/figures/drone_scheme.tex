\begin{tikzpicture}
    % Define the positions of the drones
    \coordinate (A) at (0,2);
    \coordinate (B) at (2,2);
    \coordinate (C) at (1,3);
    \coordinate (D) at (3,3);
    \coordinate (E) at (4,2);
    \coordinate (F) at (5,3);
    \coordinate (G) at (6,2);
    
    % Draw the drones with the drone image
    \foreach \pos in {A,B,C,D,E,F,G} {
        \node at (\pos) {\includegraphics[width=1cm]{figures/drone_scheme.png}};
    }
    
    % Draw the connections
    \draw[dotted] (A) -- (B);
    \draw[dotted] (B) -- (C);
    % \draw[dotted] (B) -- (D);
    \draw[dotted] (D) -- (E);
    \draw[dotted] (E) -- (F);
    % \draw[dotted] (F) -- (G);
    
    % Add agent symbols as green circles
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (0.41,2.41) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (2.41,2.41) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (1.41,3.41) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (3.41,3.41) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (4.41,2.41) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (5.41,3.41) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt] at (6.41,2.41) {};
    
    % Add blue circles to the left of some green circles
    \node[fill=blue, circle, minimum size=7pt, inner sep=0pt] at (0.11,2.41) {};
    \node[fill=blue, circle, minimum size=7pt, inner sep=0pt] at (2.11,2.41) {};
    \node[fill=blue, circle, minimum size=7pt, inner sep=0pt] at (3.11,3.41) {};
    \node[fill=blue, circle, minimum size=7pt, inner sep=0pt] at (5.11,3.41) {};
    
    % Add one additional circle to the left of an existing circle
    \node[fill=red, circle, minimum size=7pt, inner sep=0pt] at (4.11,2.41) {}; % Example: red circle added

    % Add the legend
    \node[fill=red, circle, minimum size=7pt, inner sep=0pt, label=right:{\small red agent}] at (0,1) {};
    \node[fill=blue, circle, minimum size=7pt, inner sep=0pt, label=right:{\small blue agent}] at (3,1) {};
    \node[fill=green, circle, minimum size=7pt, inner sep=0pt, label=right:{\small green agent}] at (6,1) {};
    
    \node at (1,0.5) {\includegraphics[width=1cm]{figures/drone_scheme.png}};
    \node[anchor=west] at (2,0.5) {\small drone};

    % Communication lines in legend
    \begin{scope}
        \draw[dotted] (4,0.5) -- (5,0.5);
        \node[anchor=west] at (5.1,0.5) {\small communication};
    \end{scope}
    
\end{tikzpicture}