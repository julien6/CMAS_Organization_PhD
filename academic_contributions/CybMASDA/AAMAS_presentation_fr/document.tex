\documentclass[9pt, aspectratio=169]{beamer}
% \documentclass[10pt]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usetheme{Frankfurt}

\usepackage[backend=biber, style=authoryear]{biblatex}
\addbibresource{references.bib}

%\usepackage{lmodern}
\usepackage{amsfonts,amssymb,amsmath}
\usepackage[english]{babel}
\usetheme{Frankfurt}

\usepackage{csquotes}
\usepackage{setspace}

\usepackage{colortbl}
\usepackage{tabularx}
\renewcommand\tabularxcolumn[1]{m{#1}}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}[frame number]{}

% --- Tickz
\usepackage{physics}
\usepackage{amsmath}
\usepackage{tikz}
\usepackage{mathdots}
\usepackage{yhmath}
\usepackage{cancel}
\usepackage{color}
\usepackage{siunitx}
\usepackage{array}
\usepackage{multirow}
\usepackage{amssymb}
\usepackage{gensymb}
\usepackage{tabularx}
\usepackage{extarrows}
\usepackage{booktabs}
\usetikzlibrary{fadings}
\usetikzlibrary{patterns}
\usetikzlibrary{shadows.blur}
\usetikzlibrary{shapes}

% ---------

\usepackage{booktabs}
\usepackage{setspace}
\usepackage{amssymb}
\usepackage{adjustbox}
\usepackage{pifont}
\usepackage[inkscapeformat=png]{svg}
\usepackage{graphicx}
\usepackage{times}
\setbeamertemplate{caption}[numbered]
% % \setbeamertemplate{bibliography item}{[\theenumiv]}

\setbeamerfont{bibliography item}{size=\tiny}
\setbeamerfont{bibliography entry author}{size=\tiny}
\setbeamerfont{bibliography entry title}{size=\tiny}
\setbeamerfont{bibliography entry location}{size=\tiny}
\setbeamerfont{bibliography entry note}{size=\tiny}

\setbeamerfont{frametitle}{size=\large}

\usepackage{caption}
\usepackage{float}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{animate}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle}

\usepackage{ragged2e}
\setbeamercolor{section in foot}{fg=white,bg=darkorange}
\setbeamercolor{subsection in foot}{fg=white,bg=darkorange}
\setbeamercolor{frametitle}{fg=white, bg=darkorange}
\setbeamercolor{title}{fg=white, bg=darkorange}
\setbeamercolor{frame}{bg=darkorange}
\setbeamercolor{block title}{bg=darkorange,fg=white}

\setbeamercolor{item}{fg=darkorange}

% \definecolor{darkorange}{rgb}{0.81, 0.52, 0.05}
\definecolor{darkorange}{rgb}{1,0.5,0}
\definecolor{darkorange2}{rgb}{1, 0.64, 0.2}
\definecolor{honeydew}{rgb}{1, 0.85, 0.45}


\newenvironment{variableblock}[3]{%
  \setbeamercolor{block body}{#2}
  \setbeamercolor{block title}{#3}
  \begin{block}{#1}}{\end{block}}

\newenvironment{prosblock}[1]{%
  % \setbeamercolor{block body}{bg=blue,fg=white}
  \setbeamercolor{block title}{bg=blue,fg=white}
  \begin{block}{#1}}{\end{block}}

\newenvironment{consblock}[1]{%
  % \setbeamercolor{block body}{bg=red,fg=white}
  \setbeamercolor{block title}{bg=red,fg=white}
  \begin{block}{#1}}{\end{block}}

\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%

\renewcommand{\arraystretch}{1.5}

% Please add the following required packages to your document preamble:
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{colortbl}
% Beamer presentation requires \usepackage{colortbl} instead of \usepackage[table,xcdraw]{xcolor}

\usepackage{tabularray}\UseTblrLibrary{varwidth}
\usepackage{xcolor}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
% \usepackage{cite}
\usepackage{amsmath}
\newcommand{\probP}{\text{I\kern-0.15em P}}
\usepackage{etoolbox}
\patchcmd{\thebibliography}{\section*{\refname}}{}{}{}

\setlength\tabcolsep{0.5pt}

\renewcommand{\arraystretch}{0.9}
\setlength{\tabcolsep}{2pt}

\usepackage{pgffor}

\begin{document}

\input{cover}

\begin{frame}{Content}
  \tableofcontents
\end{frame}

\input{sections/introduction}
\input{sections/theoretical_background}
\input{sections/aomea_approach}
% \input{sections/case_studies}
\input{sections/conclusion}


\section{MOISE+MARL Framework}

\begin{frame}{The $\mathcal{M}OISE^+$ Framework (1/2)}

  \begin{figure}
    \centering
    \includegraphics[width=0.75\linewidth]{figures/moise_model.png}
  \end{figure}

  \begin{spacing}{0.25}
    {\tiny Hübner, J. F., Sichman, J. S., and Boissier, O. (2002).
      A model for the structural, functional, and deontic specification of
      organizations in multiagent systems.
      In Bittencourt, G. and Ramalho, G. L., editors, Proceedings of the 16th Brazilian Symposium on Artificial Intelligence (SBIA’02), volume 2507 of LNAI, pages 118–128, Berlin. Springer.}
  \end{spacing}

\end{frame}

\begin{frame}{The $\mathcal{M}OISE^+$ Framework (2/2)}


  \vspace{-2.5ex}

  \begin{columns}
    \hspace{-16ex}
    \begin{column}{0.5\textwidth}
      \centering
      \begin{figure}[H]
        \includegraphics[width=0.7\textwidth]{figures/soccer_ss.png}
        \caption*{Structural Specifications}
      \end{figure}
    \end{column}
    \hspace{-20ex}
    \begin{column}{0.5\textwidth}
      \centering
      \begin{figure}[H]
        \centering
        \includegraphics[width=1.2\textwidth]{figures/soccer_fs.png}
        \caption*{Functional Specifications}
      \end{figure}
    \end{column}
  \end{columns}

  \ \\

  \begin{minipage}{\textwidth}
    \centering
    \begin{figure}[H]
      \centering
      \includegraphics[width=0.4\linewidth]{figures/soccer_ds.png}
      \caption*{Deontic Specifications}
    \end{figure}
  \end{minipage}

\end{frame}




% ===============================

\begin{frame}{Approach: The MOISE+MARL Framework}

  \begin{columns}[c] % c = vertically center content
    \begin{column}{0.4\textwidth}
      \begin{itemize}
        \item Combine Dec-POMDP with MOISE+ organizational model.
        \item Agents are assigned roles and missions as constraints.
        \item Use constraint guides to adjust:
              \begin{itemize}
                \item \textbf{Actions} via RoleActionGuides (RAG)
                \item \textbf{Rewards} via RoleRewardGuides and GoalRewardGuides
              \end{itemize}
      \end{itemize}
    \end{column}
    \begin{column}{0.6\textwidth}
      \begin{figure}
        \centering
        \includegraphics[width=1.\linewidth]{figures/mm_simple_representation.png}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{Approach}{The MOISE+MARL Framework}
  \begin{figure}
    \hspace{-0.76cm}
    \includegraphics[width=1.05\linewidth]{figures/modified_state_value_function.png}
  \end{figure}
\end{frame}

\begin{frame}{Evaluation: The TEMM Method}
  \begin{itemize}
    \item Unsupervised analysis of learned behaviors.
    \item Infers implicit roles and missions from trajectories.
    \item Quantifies \textbf{Organizational Fit} (alignment between behaviors and organizational structure).
    \item Highlights structural and functional consistencies.
  \end{itemize}
\end{frame}

\section{Experimental Setup}

\begin{frame}{Experimental setup}{Environments}

  \vspace{-0cm}

  \begin{columns}[c]

    \hspace{-1cm}

    \begin{column}{0.5\textwidth}
      \begin{itemize}
        \item Tested in 4 environments
        \item Compared Baseline vs. MOISE+MARL:
              \begin{itemize}
                \item Higher convergence and robustness.
                \item Improved explainability through consistent role adherence.
                \item Higher Organizational Fit (up to +89\%).
              \end{itemize}
      \end{itemize}
    \end{column}

    \hspace{-1cm}

    \begin{column}{0.5\textwidth}
      \begin{tabular}{@{}c@{\hspace{1cm}}c@{}}
        \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.15]{8}{figures/wm/frame}{0}{33}}  &
        \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.18]{8}{figures/overcooked/frame}{0}{66}}                  \\
        \small{Warehouse Management}                                                                       & \small{Overcooked-AI} \\
        \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.135]{8}{figures/mpe/frame}{0}{25}} &
        \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.135]{8}{figures/cyborg/frame}{0}{33}}                      \\
        \small{Predator-Prey}                                                                              & \small{CybORG}        \\
      \end{tabular}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{Experimental setup}{Environments}
  \begin{tabular}{cc}
    \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.1]{8}{figures/wm/frame}{0}{33}}  &
    \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.1]{8}{figures/overcooked/frame}{0}{66}}                  \\
    \small{Warehouse Management}                                                                       & \small{Overcooked-AI} \\
    \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.1]{8}{figures/mpe/frame}{0}{25}} &
    \makebox[.48\textwidth][c]{\animategraphics[loop,autoplay,scale=0.1]{8}{figures/cyborg/frame}{0}{33}}                      \\
    \small{Predator-Prey}                                                                              & \small{CybORG}        \\
  \end{tabular}
\end{frame}

\begin{frame}{Experimental setup}{Environments}

  \begin{figure}
    \centering
    \makebox[\textwidth] {
      \animategraphics[loop,autoplay,scale=0.25]{8}{figures/cyborg/frame}{0}{33}
    }
  \end{figure}

\end{frame}

\begin{frame}{Experimental setup}{Environments}

  \begin{figure}
    \centering
    \makebox[\textwidth] {
      \animategraphics[loop,autoplay,scale=0.25]{8}{figures/mpe/frame}{0}{25}
    }
  \end{figure}

\end{frame}

\begin{frame}{Experimental setup}{Environments}

  \begin{figure}
    \centering
    \makebox[\textwidth] {
      \animategraphics[loop,autoplay,scale=0.25]{8}{figures/overcooked/frame}{0}{66}
    }
  \end{figure}

\end{frame}

\begin{frame}{Experimental setup}{Environments}

  \begin{figure}
    \centering
    \makebox[\textwidth] {
      \animategraphics[loop,autoplay,scale=0.25]{8}{figures/wm/frame}{0}{33}
    }
  \end{figure}

\end{frame}

\begin{frame}{Experimental setup}{Organizational constraints}

  TODO

\end{frame}


\begin{frame}{Experimental setup}{Evaluation protocol}

  TODO

\end{frame}



\section{Results}

\begin{frame}{Key Results}
  \begin{itemize}
    \item Organizational constraints improve policy stability and interpretability.
    \item Policy-based and actor-critic algorithms benefit most.
    \item TEMM successfully recovers organizational structure from learned behavior.
  \end{itemize}
  \vspace{1em}
  \textbf{MOISE+MARL = better control, more explainable agents.}
\end{frame}

\section{Conclusion}


\begin{frame}{Conclusion and Perspectives}
  \begin{itemize}
    \item MOISE+MARL bridges MARL and organizational modeling.
    \item Future directions:
          \begin{itemize}
            \item Dynamic organizational constraints.
            \item Automatic specification generation (e.g., LLMs).
            \item TEMM optimization for real-time evaluation.
          \end{itemize}
  \end{itemize}
  \vspace{0.5em}
  \centering
\end{frame}


\appendix
%\setbeamertemplate{headline}{}
\setbeamertemplate{mini frames}{}

\input{sections/thanks}
\input{sections/references}

\input{sections/annexes}

\end{document}
